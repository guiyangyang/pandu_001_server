(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-06ff"],{CSzR:function(e,t,n){"use strict";var s=n("MmaW");n.n(s).a},MIlY:function(e,t,n){"use strict";var s=n("MTAf");n.n(s).a},MTAf:function(e,t,n){},MmaW:function(e,t,n){},c11S:function(e,t,n){"use strict";var s=n("gTgX");n.n(s).a},gTgX:function(e,t,n){},ntYl:function(e,t,n){"use strict";n.r(t);var s=n("Yfch"),o={data:function(){return{beginClientX:0,mouseMoveStata:!1,maxwidth:"",confirmWords:"拖动滑块验证",confirmSuccess:!1}},methods:{mousedownFn:function(e){this.confirmSuccess||(e.preventDefault&&e.preventDefault(),this.mouseMoveStata=!0,this.beginClientX=e.clientX)},successFunction:function(){this.confirmSuccess=!0,this.confirmWords="验证通过",window.addEventListener?(document.getElementsByTagName("html")[0].removeEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].removeEventListener("mouseup",this.moseUpFn)):document.getElementsByTagName("html")[0].removeEventListener("mouseup",function(){}),document.getElementsByClassName("drag_text")[0].style.color="#eee",document.getElementsByClassName("handler")[0].style.left=this.maxwidth+"px",document.getElementsByClassName("drag_bg")[0].style.width=this.maxwidth+"px"},mouseMoveFn:function(e){if(this.mouseMoveStata){var t=e.clientX-this.beginClientX;t>0&&t<=this.maxwidth?(document.getElementsByClassName("handler")[0].style.left=t+"px",document.getElementsByClassName("drag_bg")[0].style.width=t+"px"):t>this.maxwidth&&this.successFunction()}},moseUpFn:function(e){this.mouseMoveStata=!1,e.clientX-this.beginClientX<this.maxwidth&&(document.getElementsByClassName("handler")[0].style.left="0px",document.getElementsByClassName("drag_bg")[0].style.width="0px")}},mounted:function(){this.maxwidth=this.$refs.dragDiv.clientWidth-this.$refs.moveDiv.clientWidth,document.getElementsByTagName("html")[0].addEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].addEventListener("mouseup",this.moseUpFn)}},i=(n("CSzR"),n("KHd+")),a=Object(i.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"dragDiv",staticClass:"drag"},[n("div",{staticClass:"drag_bg"}),e._v(" "),n("div",{staticClass:"drag_text"},[e._v(e._s(e.confirmWords))]),e._v(" "),n("div",{ref:"moveDiv",staticClass:"handler handler_bg",class:{handler_ok_bg:e.confirmSuccess},staticStyle:{position:"absolute",top:"0px",left:"0px"},on:{mousedown:function(t){e.mousedownFn(t)}}})])},[],!1,null,"3ee0d674",null);a.options.__file="verifyCode.vue";var r={name:"Login",data:function(){return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:s.c}],password:[{required:!0,trigger:"blur",validator:s.b}]},loading:!1,loadingR:!1,pwdType:"text",redirect:void 0}},watch:{$route:{handler:function(e){console.log("handler"),console.log(e.query),console.log(e.query.redirect),this.redirect=e.query&&e.query.redirect},immediate:!0}},components:{VerifyCode:a.exports},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$router.push({path:e.redirect||"/"}),e.$store.dispatch("Login",e.loginForm).then(function(t){"200000"==t.status?(console.log(t.msg),console.log(t),localStorage.setItem("userid",t.result.userid),localStorage.setItem("username",t.result.username),localStorage.setItem("userphone",t.result.userphone),localStorage.setItem("email",t.result.email),e.loading=!1,e.$router.push({path:e.redirect||"/"})):e.$message({message:t.msg,type:"error",showClose:!0})}).catch(function(){e.loading=!1})})},handleRegister:function(){var e=this;console.log("注册"),this.$refs.loginForm.validate(function(t){if(!t)return console.log("验证错误"),!1;e.loadingR=!0,e.$store.dispatch("Register",e.loginForm).then(function(t){console.log("index-vue"),console.log(t),e.loadingR=!1,e.$router.push({path:e.redirect||"/"})}).catch(function(){e.loadingR=!1})})}}},l=(n("c11S"),n("MIlY"),Object(i.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[n("div",{staticClass:"title"},[e._v("悦 度 空 间")]),e._v(" "),n("div",{staticClass:"title-tip"},[e._v("给你主宰自己的力量")]),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),n("el-input",{attrs:{type:"text","auto-complete":"on",placeholder:"请输入用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),n("el-input",{attrs:{type:e.pwdType,name:"password","auto-complete":"on",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),n("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[n("svg-icon",{attrs:{"icon-class":"password"===e.pwdType?"eye":"eye-open"}})],1)],1),e._v(" "),n("verify-code"),e._v(" "),n("el-form-item",{staticClass:"form-btns"},[n("el-button",{staticStyle:{width:"46%"},attrs:{loading:e.loadingR,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleRegister(t)}}},[e._v("\n        注册\n      ")]),e._v(" "),n("el-button",{staticClass:"btn-login",staticStyle:{width:"46%"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("\n        登录\n      ")])],1)],1)],1)},[],!1,null,"112a680d",null));l.options.__file="index.vue";t.default=l.exports}}]);